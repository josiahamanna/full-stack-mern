<!DOCTYPE html>
<html>
    <head>
        <title>
            displaying users using XHR object
        </title>
    </head>
    
    <body>

        <button id = "btn"> Fetch Data </button>
               
        <script>
            const btnHandle = document.getElementById('btn')
            btnHandle.addEventListener('click', function(){
                const xhr = new XMLHttpRequest()
                // xhr.open(httpMethod, url)
                // httpMethods - GET, POST, PUT, DELETE
                xhr.open('GET', 'http://jsonplaceholder.typicode.com/users')
                xhr.send()

                xhr.onload = function(){
                    // data comes back to client as JSON - Javascript object notation 
                    // JSON is of type string
                    console.log(typeof xhr.responseText)
                    
                    // convert JSON to javascript object ??
                    const users = JSON.parse(xhr.responseText)
                    console.log(typeof users)
                    console.log(users)

                    const ul = document.createElement('ul')

                    users.forEach(function(user){
                        const li = document.createElement('li')
                        li.textContent = user.name
                        ul.appendChild(li)
                    })

                    document.body.appendChild(ul)
                }
            })
        </script>

    </body>
</html>
